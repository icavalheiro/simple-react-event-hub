{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { useEffect } from 'react';\n\nclass EventHub\n{\n  private listeners: {};\n\n  constructor ()\n  {\n    this.listeners = {};\n  }\n\n  public addListener ( type: string, listener: ( payload: any ) => {} )\n  {\n    if ( !this.listeners[ type ] )\n    {\n      this.listeners[ type ] = [];\n    }\n\n    this.listeners[ type ].push( listener );\n  }\n\n  public removeListener ( type: string, listener: ( payload: any ) => {} )\n  {\n    if ( !this.listeners[ type ] )\n      return;\n\n    this.listeners[ type ] = this.listeners[ type ].filter( x => x != listener );\n  }\n\n  public dispatchEvent ( type: string, payload: any )\n  {\n    if ( !this.listeners[ type ] )\n      return;\n\n    for ( let i = 0; i < this.listeners[ type ].length; i++ )\n    {\n      this.listeners[ type ][ i ]();\n    }\n  }\n\n  public useEvent ( type: string, listener: ( payload: any ) => {} )\n  {\n    useEffect( () =>\n    {\n      this.addListener( type, listener );\n\n      return () =>\n      {\n        this.removeListener( type, listener );\n      };\n    } );\n  }\n}\n\nconst eventHub = new EventHub();\n\nexport default eventHub;\n\nexport var useEvent = eventHub.useEvent.bind( eventHub );\nexport var dispatchEvent = eventHub.dispatchEvent.bind( eventHub );"],"names":["EventHub","listeners","type","listener","push","filter","x","payload","i","length","useEffect","addListener","removeListener","eventHub","useEvent","bind","dispatchEvent"],"mappings":";;;;;;;;IAEMA;AAIJ,sBACA;AAAA;;AACE,SAAKC,SAAL,GAAiB,EAAjB;AACD;;;;WAED,qBAAqBC,IAArB,EAAmCC,QAAnC,EACA;AACE,UAAK,CAAC,KAAKF,SAAL,CAAgBC,IAAhB,CAAN,EACA;AACE,aAAKD,SAAL,CAAgBC,IAAhB,IAAyB,EAAzB;AACD;;AAED,WAAKD,SAAL,CAAgBC,IAAhB,EAAuBE,IAAvB,CAA6BD,QAA7B;AACD;;;WAED,wBAAwBD,IAAxB,EAAsCC,QAAtC,EACA;AACE,UAAK,CAAC,KAAKF,SAAL,CAAgBC,IAAhB,CAAN,EACE;AAEF,WAAKD,SAAL,CAAgBC,IAAhB,IAAyB,KAAKD,SAAL,CAAgBC,IAAhB,EAAuBG,MAAvB,CAA+B,UAAAC,CAAC;AAAA,eAAIA,CAAC,IAAIH,QAAT;AAAA,OAAhC,CAAzB;AACD;;;WAED,uBAAuBD,IAAvB,EAAqCK,OAArC,EACA;AACE,UAAK,CAAC,KAAKN,SAAL,CAAgBC,IAAhB,CAAN,EACE;;AAEF,WAAM,IAAIM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKP,SAAL,CAAgBC,IAAhB,EAAuBO,MAA5C,EAAoDD,CAAC,EAArD,EACA;AACE,aAAKP,SAAL,CAAgBC,IAAhB,EAAwBM,CAAxB;AACD;AACF;;;WAED,kBAAkBN,IAAlB,EAAgCC,QAAhC,EACA;AAAA;;AACEO,MAAAA,SAAS,CAAE,YACX;AACE,QAAA,KAAI,CAACC,WAAL,CAAkBT,IAAlB,EAAwBC,QAAxB;;AAEA,eAAO,YACP;AACE,UAAA,KAAI,CAACS,cAAL,CAAqBV,IAArB,EAA2BC,QAA3B;AACD,SAHD;AAID,OARQ,CAAT;AASD;;;;;;IAGGU,QAAQ,GAAG,IAAIb,QAAJ;IAINc,QAAQ,GAAGD,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,CAAwBF,QAAxB;IACXG,aAAa,GAAGH,QAAQ,CAACG,aAAT,CAAuBD,IAAvB,CAA6BF,QAA7B;;;;"}